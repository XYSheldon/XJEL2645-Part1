<!DOCTYPE html>
<html>

<!-- Header -->

<head>
    <link rel="stylesheet" href="../css/main.css">
    <title>ELEC2645 Embedded Systems Project</title>
</head>

<!-- Body -->

<body>
    <!-- Top matter -->
    <section>
        <nav>
            <a href="../index.html">Home</a>
            <a href="https://github.com/ELEC2645">GitHub</a>
        </nav>

        <a href="http://www.leeds.ac.uk">
    <img src="../images/logo.png" alt="University of Leeds" style="float:right;width:200px;height:80px;">
    </a>
    </section>

    <!-- Title -->
    <h1>Creating menus</h1>

    <!-- Introduction -->
    <section>
        <h2>Introduction</h2>
        <p>Command line interfaces (CLI) are very simple by their nature and lack the fancy graphics found in grahpical user interfaces (GUI). However, their apperance and ease of user interaction can be improved somewhat by making simple menus.</p>
    </section>

    <!-- Example -->
    <section>
        <h2>Example menu system</h2>
        <p>In this example system, the user is presented with 5 options, selected by entering the relevant integer value. The input is validated to ensure corect operation. The first 4 options call functions in which different applications could be implemented. The fifth option exits the program. In each of the 4 sub-functions, the user can enter 'b' or 'B' to go back to the main menu. Note the use of hyphens (-) and pipes (|) to draw a very primitive box around the menu using the <i>print_main_menu</i>function.</p>
        <p>The main function just calls the <i>main_menu</i> function. This prints the main menu, gets the user input and selects the relevant option. Since each sub-function recursively calls this main menu function, it effectively forms a loop. The user can break the loop and exit the program by inputting the exit command.</p>
        <!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;font-family: 'courier new', courier, monospace;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%">  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #BC7A00">#include &lt;iostream&gt;</span>
<span style="color: #BC7A00">#include &lt;regex&gt;</span>

<span style="color: #B00040">void</span> <span style="color: #0000FF">main_menu</span>();
<span style="color: #B00040">int</span> <span style="color: #0000FF">get_user_input</span>();
<span style="color: #B00040">void</span> <span style="color: #0000FF">select_menu_item</span>(<span style="color: #B00040">int</span> input);
<span style="color: #B00040">void</span> <span style="color: #0000FF">print_main_menu</span>();
<span style="color: #B00040">void</span> <span style="color: #0000FF">go_back_to_main_menu</span>();
<span style="color: #B00040">bool</span> <span style="color: #0000FF">is_integer</span>(std<span style="color: #666666">::</span>string num);
<span style="color: #B00040">void</span> <span style="color: #0000FF">menu_item_1</span>();
<span style="color: #B00040">void</span> <span style="color: #0000FF">menu_item_2</span>();
<span style="color: #B00040">void</span> <span style="color: #0000FF">menu_item_3</span>();
<span style="color: #B00040">void</span> <span style="color: #0000FF">menu_item_4</span>();

<span style="color: #B00040">int</span> <span style="color: #0000FF">main</span>(<span style="color: #B00040">int</span> argc, <span style="color: #B00040">char</span> <span style="color: #008000; font-weight: bold">const</span> <span style="color: #666666">*</span>argv[]) {
  main_menu();
  <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>;
}

<span style="color: #B00040">void</span> <span style="color: #0000FF">main_menu</span>() {
  print_main_menu();
  <span style="color: #B00040">int</span> input <span style="color: #666666">=</span> get_user_input();
  select_menu_item(input);
}

<span style="color: #B00040">int</span> <span style="color: #0000FF">get_user_input</span>() {
  <span style="color: #B00040">int</span> input;
  std<span style="color: #666666">::</span>string input_string;
  <span style="color: #B00040">bool</span> valid_input <span style="color: #666666">=</span> <span style="color: #008000">false</span>;
  <span style="color: #B00040">int</span> menu_items <span style="color: #666666">=</span> <span style="color: #666666">5</span>;

  <span style="color: #008000; font-weight: bold">do</span> {
    std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">Select item: &quot;</span>;
    std<span style="color: #666666">::</span>cin <span style="color: #666666">&gt;&gt;</span> input_string;
    valid_input <span style="color: #666666">=</span> is_integer(input_string);
    <span style="color: #408080; font-style: italic">// if input is not an integer, print an error message</span>
    <span style="color: #008000; font-weight: bold">if</span> (valid_input <span style="color: #666666">==</span> <span style="color: #008000">false</span>) {
      std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Enter an integer!</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>;
    } <span style="color: #008000; font-weight: bold">else</span> {  <span style="color: #408080; font-style: italic">// if it is an int, check whether in range</span>
      input <span style="color: #666666">=</span> std<span style="color: #666666">::</span>stoi(input_string);  <span style="color: #408080; font-style: italic">// convert to int</span>
      <span style="color: #008000; font-weight: bold">if</span> (input <span style="color: #666666">&gt;=</span> <span style="color: #666666">1</span> <span style="color: #666666">&amp;&amp;</span> input <span style="color: #666666">&lt;=</span> menu_items) {
        valid_input <span style="color: #666666">=</span> <span style="color: #008000">true</span>;
      } <span style="color: #008000; font-weight: bold">else</span> {
        std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Invalid menu item!</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>;
        valid_input <span style="color: #666666">=</span> <span style="color: #008000">false</span>;
      }
    }
  } <span style="color: #008000; font-weight: bold">while</span> (valid_input <span style="color: #666666">==</span> <span style="color: #008000">false</span>);

  <span style="color: #008000; font-weight: bold">return</span> input;
}

<span style="color: #B00040">void</span> <span style="color: #0000FF">select_menu_item</span>(<span style="color: #B00040">int</span> input) {
  <span style="color: #008000; font-weight: bold">switch</span> (input) {
    <span style="color: #008000; font-weight: bold">case</span> <span style="color: #666666">1</span>:
      menu_item_1();
      <span style="color: #008000; font-weight: bold">break</span>;
    <span style="color: #008000; font-weight: bold">case</span> <span style="color: #666666">2</span>:
      menu_item_2();
      <span style="color: #008000; font-weight: bold">break</span>;
    <span style="color: #008000; font-weight: bold">case</span> <span style="color: #666666">3</span>:
      menu_item_3();
      <span style="color: #008000; font-weight: bold">break</span>;
    <span style="color: #008000; font-weight: bold">case</span> <span style="color: #666666">4</span>:
      menu_item_4();
      <span style="color: #008000; font-weight: bold">break</span>;
    <span style="color: #A0A000">default:</span>
      exit(<span style="color: #666666">1</span>);
      <span style="color: #008000; font-weight: bold">break</span>;
  }
}

<span style="color: #B00040">void</span> <span style="color: #0000FF">print_main_menu</span>() {
  std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">----------- Main menu -----------</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>;
  std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;|</span><span style="color: #BB6622; font-weight: bold">\t\t\t\t</span><span style="color: #BA2121">|</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>;
  std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;|</span><span style="color: #BB6622; font-weight: bold">\t</span><span style="color: #BA2121">1. Menu item 1</span><span style="color: #BB6622; font-weight: bold">\t\t</span><span style="color: #BA2121">|</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>;
  std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;|</span><span style="color: #BB6622; font-weight: bold">\t</span><span style="color: #BA2121">2. Menu item 2</span><span style="color: #BB6622; font-weight: bold">\t\t</span><span style="color: #BA2121">|</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>;
  std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;|</span><span style="color: #BB6622; font-weight: bold">\t</span><span style="color: #BA2121">3. Menu item 3</span><span style="color: #BB6622; font-weight: bold">\t\t</span><span style="color: #BA2121">|</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>;
  std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;|</span><span style="color: #BB6622; font-weight: bold">\t</span><span style="color: #BA2121">4. Menu item 4</span><span style="color: #BB6622; font-weight: bold">\t\t</span><span style="color: #BA2121">|</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>;
  std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;|</span><span style="color: #BB6622; font-weight: bold">\t</span><span style="color: #BA2121">5. Exit</span><span style="color: #BB6622; font-weight: bold">\t\t\t</span><span style="color: #BA2121">|</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>;
  std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;|</span><span style="color: #BB6622; font-weight: bold">\t\t\t\t</span><span style="color: #BA2121">|</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>;
  std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;---------------------------------</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>;
}

<span style="color: #B00040">void</span> <span style="color: #0000FF">go_back_to_main</span>() {
  std<span style="color: #666666">::</span>string input;
  <span style="color: #008000; font-weight: bold">do</span> {
    std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">Enter &#39;b&#39; or &#39;B&#39; to go back to main menu: &quot;</span>;
    std<span style="color: #666666">::</span>cin <span style="color: #666666">&gt;&gt;</span> input;
  } <span style="color: #008000; font-weight: bold">while</span> (input <span style="color: #666666">!=</span> <span style="color: #BA2121">&quot;b&quot;</span> <span style="color: #666666">&amp;&amp;</span> input <span style="color: #666666">!=</span> <span style="color: #BA2121">&quot;B&quot;</span>);
  main_menu();
}

<span style="color: #408080; font-style: italic">// https://codereview.stackexchange.com/questions/162569/checking-if-each-char-in-a-string-is-a-decimal-digit</span>
<span style="color: #B00040">bool</span> <span style="color: #0000FF">is_integer</span>(std<span style="color: #666666">::</span>string num) {
  <span style="color: #008000; font-weight: bold">return</span> std<span style="color: #666666">::</span>regex_match(num, std<span style="color: #666666">::</span>regex(<span style="color: #BA2121">&quot;[+-]?[0-9]+&quot;</span>));
}

<span style="color: #B00040">void</span> <span style="color: #0000FF">menu_item_1</span>() {
  std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&gt;&gt; Menu 1</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>;
  std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">Some code here does something useful</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>;
  go_back_to_main();
}
<span style="color: #B00040">void</span> <span style="color: #0000FF">menu_item_2</span>() {
  std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&gt;&gt; Menu 2</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>;
  std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">Some code here does something useful</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>;
  go_back_to_main();
}
<span style="color: #B00040">void</span> <span style="color: #0000FF">menu_item_3</span>() {
  std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&gt;&gt; Menu 3</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>;
  std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">Some code here does something useful</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>;
  go_back_to_main();
}
<span style="color: #B00040">void</span> <span style="color: #0000FF">menu_item_4</span>() {
  std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&gt;&gt; Menu 4</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>;
  std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">Some code here does something useful</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>;
  go_back_to_main();
}
</pre></td></tr></table></div>
    </section>

     <!-- Output -->
    <section>
        <h2>Program output</h2>
        <p>The output of the program is shown below.</p>
        <!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;font-family: 'courier new', courier, monospace;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #666666">-----------</span> Main menu <span style="color: #666666">-----------</span>
<span style="color: #666666">|</span>                               <span style="color: #666666">|</span>
<span style="color: #666666">|</span>       <span style="color: #666666">1.</span> Menu item <span style="color: #666666">1</span>          <span style="color: #666666">|</span>
<span style="color: #666666">|</span>       <span style="color: #666666">2.</span> Menu item <span style="color: #666666">2</span>          <span style="color: #666666">|</span>
<span style="color: #666666">|</span>       <span style="color: #666666">3.</span> Menu item <span style="color: #666666">3</span>          <span style="color: #666666">|</span>
<span style="color: #666666">|</span>       <span style="color: #666666">4.</span> Menu item <span style="color: #666666">4</span>          <span style="color: #666666">|</span>
<span style="color: #666666">|</span>       <span style="color: #666666">5.</span> Exit                 <span style="color: #666666">|</span>
<span style="color: #666666">|</span>                               <span style="color: #666666">|</span>
<span style="color: #666666">---------------------------------</span>

Select item<span style="color: #666666">:</span> <span style="color: #666666">1</span>

<span style="color: #666666">&gt;&gt;</span> Menu <span style="color: #666666">1</span>

Some code here does something useful

Enter <span style="color: #BA2121">&#39;b&#39;</span> or <span style="color: #BA2121">&#39;B&#39;</span> to go back to main menu<span style="color: #666666">:</span>
</pre></div>


    </section>


</body>


<!-- footer -->
<footer>
    <ul>
        <li> &copy Dr Craig A. Evans, 2018 </li>
        <li> <a href="mailto:C.A.Evans@leeds.ac.uk">email</a></li>
        <li> <a href="https://engineering.leeds.ac.uk/staff/347/Dr_Craig_A_Evans">webpage</a></li>
    </ul>
</footer>

</html>
