<!DOCTYPE html>
<html>

<!-- Header -->

<head>
    <link rel="stylesheet" href="../css/main.css">
    <title>ELEC2645 Embedded Systems Project</title>
</head>

<!-- Body -->

<body>
    <!-- Top matter -->
    <section>
        <nav>
            <a href="../index.html">Home</a>
            <a href="https://github.com/ELEC2645">GitHub</a>
        </nav>

        <a href="http://www.leeds.ac.uk">
    <img src="../images/logo.png" alt="University of Leeds" style="float:right;width:200px;height:80px;">
    </a>
    </section>

    <!-- Title -->
    <h1>Flags</h1>

    <!-- Introduction -->
    <section>
        <h2>Introduction</h2>
        <p>We have see how we can pass in data to programs using both command line arguments and the user entering data via the command line. But what happens if the user enters incorrect data? For example, they enter the string "Hello, World!" instead of an integer? What will happen? It is extremely likely that the program will not function as intended. This probably isn't a problem for a simple program that calculates the area of a circle. The user can just run it again with the correct type of input. But what about the launch system on a nuclear submarine? Do you really want to start World War III because the captain pressed the wrong key!?</p>
        <p>It is therefore a good idea to validate the user input before using it in the program.</p>
    </section>

    <!-- Validating user input -->
    <section>
        <h2>Guessing Game Example</h2>
        <p>The example below is for a simple guessing game. The program generates a random number in the range 1 to 10 (these can be changed in the code). The user is then asked to guess the number and a suitable message is displayed depending on whether the guess was correct. There are two levels of data validation. First the input is checked to ensure that it is an integer using a <a href="https://codereview.stackexchange.com/questions/162569/checking-if-each-char-in-a-string-is-a-decimal-digit">C++11 regular expression</a> and also that the guess is within range. The validation code is in a loop so that the user will have to keep entering data until valid values are entered.</p>
        <p>The random number is generated using the C++ random library. A <a href="https://en.wikipedia.org/wiki/Mersenne_Twister">Mersenne Twister</a> random number generator is used with the current time (from the <i>chrono</i> library) used to seed the random number generator to ensure that a different set of random numbers are generated each time the program is run.</p>
        <p>There are also some basic functions such as <i>print_line</i> and <i>print_word</i> have been used to print lines in the command line and print text centrally. This is just to make a very simple command line interface. </p>

        <!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;font-family: 'courier new', courier, monospace;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #BC7A00">#include &lt;chrono&gt;</span>
<span style="color: #BC7A00">#include &lt;iostream&gt;</span>
<span style="color: #BC7A00">#include &lt;random&gt;</span>
<span style="color: #BC7A00">#include &lt;regex&gt;</span>

<span style="color: #B00040">int</span> <span style="color: #0000FF">get_random_number</span>(<span style="color: #B00040">int</span> low, <span style="color: #B00040">int</span> high);
<span style="color: #B00040">void</span> <span style="color: #0000FF">print_line</span>(<span style="color: #B00040">int</span> n);
<span style="color: #B00040">void</span> <span style="color: #0000FF">print_word</span>(std<span style="color: #666666">::</span>string word);
<span style="color: #B00040">void</span> <span style="color: #0000FF">welcome</span>();
<span style="color: #B00040">bool</span> <span style="color: #0000FF">is_integer</span>(std<span style="color: #666666">::</span>string num);
<span style="color: #B00040">int</span> <span style="color: #0000FF">get_input</span>(<span style="color: #B00040">int</span> low, <span style="color: #B00040">int</span> high);

<span style="color: #B00040">int</span> <span style="color: #0000FF">main</span>(<span style="color: #B00040">int</span> argc, <span style="color: #B00040">char</span> <span style="color: #008000; font-weight: bold">const</span> <span style="color: #666666">*</span>argv[]) {
  welcome();
  <span style="color: #B00040">int</span> low <span style="color: #666666">=</span> <span style="color: #666666">1</span>;
  <span style="color: #B00040">int</span> high <span style="color: #666666">=</span> <span style="color: #666666">10</span>;

  <span style="color: #408080; font-style: italic">// beginning of game loop</span>
  <span style="color: #B00040">int</span> n <span style="color: #666666">=</span> get_random_number(low, high);
  <span style="color: #408080; font-style: italic">// for de-bugging only! Comment the line below to play properly!</span>
  std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> n <span style="color: #666666">&lt;&lt;</span> std<span style="color: #666666">::</span>endl;
  std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;You need to guess the number in the range &quot;</span> <span style="color: #666666">&lt;&lt;</span> low <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot; to &quot;</span>
            <span style="color: #666666">&lt;&lt;</span> high <span style="color: #666666">&lt;&lt;</span> std<span style="color: #666666">::</span>endl;
  <span style="color: #B00040">int</span> guess <span style="color: #666666">=</span> get_input(low, high);

  <span style="color: #008000; font-weight: bold">if</span> (guess <span style="color: #666666">==</span> n) {
    std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;You&#39;ve guessed correctly! Winner!</span><span style="color: #BB6622; font-weight: bold">\n\n</span><span style="color: #BA2121">&quot;</span>;
  } <span style="color: #008000; font-weight: bold">else</span> {
    std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Incorrect! Loser!</span><span style="color: #BB6622; font-weight: bold">\n\n</span><span style="color: #BA2121">&quot;</span>;
  }
  <span style="color: #408080; font-style: italic">// end of game loop</span>

  print_line(<span style="color: #666666">80</span>);
}

<span style="color: #B00040">int</span> <span style="color: #0000FF">get_random_number</span>(<span style="color: #B00040">int</span> low, <span style="color: #B00040">int</span> high) {
  <span style="color: #B00040">int</span> seed <span style="color: #666666">=</span>
      std<span style="color: #666666">::</span>chrono<span style="color: #666666">::</span>high_resolution_clock<span style="color: #666666">::</span>now().time_since_epoch().count();
  std<span style="color: #666666">::</span>mt19937 generator(seed);
  std<span style="color: #666666">::</span>uniform_int_distribution<span style="color: #666666">&lt;</span><span style="color: #B00040">int</span><span style="color: #666666">&gt;</span> distribution(low, high);
  <span style="color: #008000; font-weight: bold">return</span> distribution(generator);
}

<span style="color: #B00040">void</span> <span style="color: #0000FF">print_line</span>(<span style="color: #B00040">int</span> n) {
  <span style="color: #008000; font-weight: bold">for</span> (<span style="color: #B00040">int</span> i <span style="color: #666666">=</span> <span style="color: #666666">0</span>; i <span style="color: #666666">&lt;</span> n; i<span style="color: #666666">++</span>) {
    std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;#&quot;</span>;
  }
}

<span style="color: #B00040">void</span> <span style="color: #0000FF">print_word</span>(std<span style="color: #666666">::</span>string word) {
  <span style="color: #B00040">int</span> length <span style="color: #666666">=</span> word.length();
  <span style="color: #008000; font-weight: bold">for</span> (<span style="color: #B00040">int</span> i <span style="color: #666666">=</span> <span style="color: #666666">0</span>; i <span style="color: #666666">&lt;</span> (<span style="color: #666666">80</span> <span style="color: #666666">-</span> length) <span style="color: #666666">/</span> <span style="color: #666666">2</span> <span style="color: #666666">-</span> <span style="color: #666666">1</span>; i<span style="color: #666666">++</span>) {
    std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot; &quot;</span>;
  }
  std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> word <span style="color: #666666">&lt;&lt;</span> std<span style="color: #666666">::</span>endl;
}

<span style="color: #B00040">void</span> <span style="color: #0000FF">welcome</span>() {
  print_line(<span style="color: #666666">80</span>);
  std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\n\n</span><span style="color: #BA2121">&quot;</span>;
  print_word(<span style="color: #BA2121">&quot;Welcome to the Guessing Game!&quot;</span>);
}

<span style="color: #408080; font-style: italic">// https://codereview.stackexchange.com/questions/162569/checking-if-each-char-in-a-string-is-a-decimal-digit</span>
<span style="color: #B00040">bool</span> <span style="color: #0000FF">is_integer</span>(std<span style="color: #666666">::</span>string num) {
  <span style="color: #008000; font-weight: bold">return</span> std<span style="color: #666666">::</span>regex_match(num, std<span style="color: #666666">::</span>regex(<span style="color: #BA2121">&quot;[+-]?[0-9]+&quot;</span>));
}

<span style="color: #B00040">int</span> <span style="color: #0000FF">get_input</span>(<span style="color: #B00040">int</span> low, <span style="color: #B00040">int</span> high) {
  std<span style="color: #666666">::</span>string guess_string;
  <span style="color: #B00040">bool</span> valid_input <span style="color: #666666">=</span> <span style="color: #008000">false</span>;
  <span style="color: #B00040">int</span> guess <span style="color: #666666">=</span> <span style="color: #666666">0</span>;

  <span style="color: #008000; font-weight: bold">do</span> {
    std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">Have a guess: &quot;</span>;
    std<span style="color: #666666">::</span>cin <span style="color: #666666">&gt;&gt;</span> guess_string;
    valid_input <span style="color: #666666">=</span> is_integer(guess_string);
    <span style="color: #408080; font-style: italic">// if input is not an integer, print an error message</span>
    <span style="color: #008000; font-weight: bold">if</span> (valid_input <span style="color: #666666">==</span> <span style="color: #008000">false</span>) {
      std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;You didn&#39;t enter an integer!</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>;
    } <span style="color: #008000; font-weight: bold">else</span> {  <span style="color: #408080; font-style: italic">// if it is an int, check whether in range</span>
      guess <span style="color: #666666">=</span> std<span style="color: #666666">::</span>stoi(guess_string);  <span style="color: #408080; font-style: italic">// convert to int</span>
      <span style="color: #008000; font-weight: bold">if</span> (guess <span style="color: #666666">&gt;=</span> low <span style="color: #666666">&amp;&amp;</span> guess <span style="color: #666666">&lt;=</span> high) {
        valid_input <span style="color: #666666">=</span> <span style="color: #008000">true</span>;
      } <span style="color: #008000; font-weight: bold">else</span> {
        std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Input out of range!</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>;
        valid_input <span style="color: #666666">=</span> <span style="color: #008000">false</span>;
      }
    }
  } <span style="color: #008000; font-weight: bold">while</span> (valid_input <span style="color: #666666">==</span> <span style="color: #008000">false</span>);

  <span style="color: #008000; font-weight: bold">return</span> guess;
}
</pre></td></tr></table></div>
    </section>

    <section>
        <h2>Program Output</h2>

        <p>Various program outputs are shown below.</p>
        <p>Incorrect guess.</p>

        <!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;font-family: 'courier new', courier, monospace;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #BC7A00">################################################################################</span>

                        Welcome to the Guessing Game<span style="color: #666666">!</span>

You need to guess the number in the range <span style="color: #666666">1</span> to <span style="color: #666666">10</span>

Have a guess<span style="color: #666666">:</span> <span style="color: #666666">6</span>

Incorrect<span style="color: #666666">!</span> Loser<span style="color: #666666">!</span>

<span style="color: #BC7A00">################################################################################</span>
</pre></div>

   <p>Correct guess.</p>
    <!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;font-family: 'courier new', courier, monospace;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #BC7A00">################################################################################</span>

                        Welcome to the Guessing Game<span style="color: #666666">!</span>

You need to guess the number in the range <span style="color: #666666">1</span> to <span style="color: #666666">10</span>

Have a guess<span style="color: #666666">:</span> <span style="color: #666666">6</span>

You<span style="border: 1px solid #FF0000">&#39;</span>ve guessed correctly<span style="color: #666666">!</span> Winner<span style="color: #666666">!</span>

<span style="color: #BC7A00">################################################################################</span>
</pre></div>

    <p>Out of range guesses.</p>

    <!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;font-family: 'courier new', courier, monospace;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #BC7A00">################################################################################</span>

                        Welcome to the Guessing Game<span style="color: #666666">!</span>

You need to guess the number in the range <span style="color: #666666">1</span> to <span style="color: #666666">10</span>

Have a guess<span style="color: #666666">:</span> <span style="color: #666666">12</span>
Input out of range<span style="color: #666666">!</span>

Have a guess<span style="color: #666666">:</span> <span style="color: #666666">15</span>
Input out of range<span style="color: #666666">!</span>

Have a guess<span style="color: #666666">:</span> <span style="color: #666666">-1</span>
Input out of range<span style="color: #666666">!</span>

Have a guess<span style="color: #666666">:</span> <span style="color: #666666">2</span>

Incorrect<span style="color: #666666">!</span> Loser<span style="color: #666666">!</span>

<span style="color: #BC7A00">################################################################################</span>
</pre></div>

<p>Invalid inputs (float and string).</p>

   <!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;font-family: 'courier new', courier, monospace;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #BC7A00">################################################################################</span>

                        Welcome to the Guessing Game<span style="color: #666666">!</span>

You need to guess the number in the range <span style="color: #666666">1</span> to <span style="color: #666666">10</span>

Have a guess<span style="color: #666666">:</span> <span style="color: #666666">1.1</span>
You didn<span style="border: 1px solid #FF0000">&#39;</span>t enter an integer<span style="color: #666666">!</span>

Have a guess<span style="color: #666666">:</span> Hello
You didn<span style="border: 1px solid #FF0000">&#39;</span>t enter an integer<span style="color: #666666">!</span>

Have a guess<span style="color: #666666">:</span> <span style="color: #666666">2</span>

Incorrect<span style="color: #666666">!</span> Loser<span style="color: #666666">!</span>

<span style="color: #BC7A00">################################################################################</span>
</pre></div>




    </section>


</body>


<!-- footer -->
<footer>
    <ul>
        <li> &copy Dr Craig A. Evans, 2018 </li>
        <li> <a href="mailto:C.A.Evans@leeds.ac.uk">email</a></li>
        <li> <a href="https://engineering.leeds.ac.uk/staff/347/Dr_Craig_A_Evans">webpage</a></li>
    </ul>
</footer>

</html>
